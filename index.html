<html>
    <head>
    <link rel="stylesheet" href="jqwidgets/styles/jqx.base.css" type="text/css" />

        <script src="scripts/jquery-1.11.1.min.js"></script>
        <script src="jqwidgets/jqxcore.js"></script>
        <script src="jqwidgets/jqxribbon.js"></script>
        <script src="jqwidgets/jqxwindow.js"></script>
        <script src="jqwidgets/jqxmenu.js"></script>
        <script src="jqwidgets/jqxlayout.js"></script>
        <script src="jqwidgets/jqxdockinglayout.js"></script>
        <script src="jqwidgets/jqxbuttons.js"></script>
        <script src="jqwidgets/jqxscrollbar.js"></script>
        <script src="jqwidgets/jqxtextarea.js"></script>
        <script src="jqwidgets/jqxdata.js"></script>
        <script src="jqwidgets/jqxdraw.js"></script>
        <script src="jqwidgets/jqxtree.js"></script>
        <script src="jqwidgets/jqxdatatable.js"></script>

        <style type="text/css">
            .jqx-layout-group-auto-hide-content-vertical
            {
                width: 200px;
            }
        </style>

        <script type="text/javascript">
            $(document).ready(function () {
                // the 'layout' JSON array defines the internal structure of the docking layout
                var layout = [{
                    type: 'layoutGroup',
                    orientation: 'horizontal',
                    items: [
                    {
                        type: 'layoutGroup',
                        orientation: 'vertical',
                        width: '80%',
                        items: [
                            {
                            type: 'documentGroup',
                            height: '50%',
                            minHeight: 200,
                            items: [{
                                type: 'documentPanel',
                                title: 'Disassembler',
                                contentContainer: 'dock-disam',
                                },
                                {
                                type: 'documentPanel',
                                title: 'Sprite',
                                contentContainer: 'dock-sprite'
                                },
                                {
                                type: 'documentPanel',
                                title: 'CPU',
                                contentContainer: 'dock-cpu'
                                },
                                {
                                type: 'documentPanel',
                                title: 'Source',
                                contentContainer: 'tab-source'
                                }]
                            },
                            {
                            type: 'tabbedGroup',
                            height: '50%',
                            minHeight: 200,
                            pinnedHeight: 30,
                            items: [{
                                type: 'layoutPanel',
                                title: 'Error List',
                                contentContainer: 'ErrorListPanel'
                            }]
                            }]
                    },
                    {
                        type: 'tabbedGroup',
                        width: '10%',
                        minWidth: 200,
                        items: [{
                            type: 'layoutPanel',
                            title: 'Breakpoints',
                            contentContainer: 'dock-breakpoint'
                        }]
                    }]
                }];
    
                $('#dockingLayout').jqxDockingLayout({ 
                    width: "100%", 
                    height: "100%", 
                    layout: layout, 
                    contextMenu: true });
        });
        </script>
        <style>
            .disasm-menu {
                width: 100%;
            }
            .debug-bar {
                width: 90px; /* Set a specific width */
                background-color: #222; /* Dark-grey background */
              }
              
              .debug-bar a {
                float: left; /* Float links side by side */
                text-align: center; /* Center-align text */
                width: 20%; /* Equal width (5 icons with 20% width each = 100%) */
                padding: 12px 0; /* Some top and bottom padding */
                transition: all 0.3s ease; /* Add transition for hover effects */
                color: white; /* White text color */
                font-size: 36px; /* Increased font size */
              }
              
              .debug-bar a:hover {
                background-color: #eee; /* Add a hover color */
              }
        </style>            
        <script src="mnemonics.js"></script>
        <script src="disasm.js"></script>
        <script src="debug.js"></script>
        <script src="symbols.js"></script>
        <script src="debuginfo.js"></script>
        <script src="dock-asm.js"></script>
        <script src="dock-sprite.js"></script>
        <script src="dock-breakpoints.js"></script>
        <script src="dock-cpu.js"></script>
    </head>
    <body>
        <div id="dockingLayout">
            <!--The panel content divs can have a flat structure-->
            <!--autoHideGroup-->
            <div data-container="ToolboxPanel">
                List of tools
            </div>
            <!--documentGroup-->
            <div data-container="dock-disam" id="dock-disam">
                <div class="disam-menu">
                    <div class="debug-bar">
                        <a href="#" onclick="debug_continue();"><img height="16px" width="16px" src="images/breakpoint/filled_continue_icon_215869.png"></a>
                        <a href="#" onclick="debug_stepover();"><img height="16px" width="16px" src="images/breakpoint/box16-icon56-24.png"></a>
                        <a href="#" onclick="debug_stepinto();"><img height="16px" width="16px" src="images/breakpoint/debug_step_into_icon_137695.png"></a>
                        <a href="#" onclick="debug_stepout();"><img height="16px" width="16px" src="images/breakpoint/debug_step_out_icon_138699.png"></a>
                    </div>
                    <div id="jump"><input type="text" id="goto" name="goto" required minlength="4" maxlength="4" size="10" onkeypress="clickPress(event)"/></div>
                    </div>
                <div id="disam"></div>
            </div>
            <div data-container="dock-sprite">
                <img id="sprite" style="transform-origin: top left; transform: scale(2);"/>
            </div>
            <div data-container="dock-cpu">
                <div id="pc"></div>
                <div id="sp"></div>
                <div id="a"></div>
                <div id="x"></div>
                <div id="y"></div>
                <div id="status"></div>
                <input type='file' accept='text/plain' onchange='openFile(event)'>
            </div>
            <div data-container="tab-source">
                <div id="source"></div>
            </div>
            <!--bottom tabbedGroup-->
            <div data-container="ErrorListPanel">
                No errors.</div>
            <!--right tabbedGroup-->
            <div data-container="dock-breakpoint">
                <div id="breakpoints"></div>
            </div>
        </div>
        <script>
let Config=undefined;
function init1()
{
    load_symbols(Config.symbols, init2);
}

function init2()
{
    dock_sprite("http://localhost:9009/vera/sprite/0")
    dock_breakpoints();
    dock_disasm(0, 0);
    check_cpu();
}

fetch("config.json")
.then ( response => response.json())
.then ( json => {
    Config = json;
    load_debuginfo(Config.debuginfo, init1);
})
        </script>   
    </body>
</html>